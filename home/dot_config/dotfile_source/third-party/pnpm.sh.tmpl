{{- if lookPath "pnpm" -}}

alias pn='pnpm'

# pnpm installation paths - use proto shim when available
if [[ -f "$HOME/.local/share/proto/shims/pnpm" ]]; then
    # Proto manages pnpm, no need to set PNPM_HOME
    :
{{- if eq .chezmoi.os "darwin" }}
elif [[ -d "$HOME/Library/pnpm" ]]; then
    export PNPM_HOME="$HOME/Library/pnpm"
    path_add "$PNPM_HOME"
{{- else }}
elif [[ -d "$HOME/.local/share/pnpm" ]]; then
    export PNPM_HOME="$HOME/.local/share/pnpm"
    path_add "$PNPM_HOME"
{{- end }}
fi


# Shell completions for pnpm
if [[ -n ${ZSH_NAME} ]]; then
    eval "$(pnpm completion zsh)"
elif [[ -n ${BASH} ]]; then
    # shellcheck disable=SC1090
    source <(pnpm completion bash)
fi

{{- end }}