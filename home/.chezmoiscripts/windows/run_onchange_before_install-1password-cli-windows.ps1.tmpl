{{- if and (eq .chezmoi.os "windows") .dev_computer -}}
# Install 1Password CLI on Windows using winget
Write-Host "Installing 1Password CLI via winget..." -ForegroundColor Green

try {
    # Check if winget is available
    if (!(Get-Command winget -ErrorAction SilentlyContinue)) {
        Write-Host "winget is not available. Please install winget first." -ForegroundColor Red
        exit 1
    }

    # Install 1Password CLI
    winget install --id AgileBits.1PasswordCLI --accept-package-agreements --accept-source-agreements

    Write-Host "1Password CLI installed successfully!" -ForegroundColor Green
    Write-Host "Note: You'll need to set up the WSL2 symlink separately using the bash script." -ForegroundColor Yellow
}
catch {
    Write-Host "Failed to install 1Password CLI: $_" -ForegroundColor Red
    exit 1
}
{{- end -}}